import{api}from"/js/api-min.js";class Logger{constructor(){this.baseUrl="/log"}async sendLog(e,r){try{const n=`${this.baseUrl}${e}`;return await api(n,{method:"POST",body:r})}catch(e){return null}}async logError(e,r,n){return await this.sendLog("/error",{action:e,context:r,message:n})}async logSystem(e,r,n){return await this.sendLog("/system",{action:e,context:r,message:n})}async log(e,r,n,o){return await this.sendLog("",{category:e,action:r,context:n,message:o})}setupGlobalErrorHandler(){window.addEventListener("error",(e=>{this.logError("UnhandledError",e.filename||"Unknown",`${e.message} at line ${e.lineno}:${e.colno}`)})),window.addEventListener("unhandledrejection",(e=>{this.logError("UnhandledPromiseRejection","Promise",e.reason?.message||e.reason||"Unknown error")}))}}const logger=new Logger;export{logger};